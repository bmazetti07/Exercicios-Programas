{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/mazetti/Bruno/eps/Computa\\xE7\\xE3o M\\xF3vel/EP1/app/screens/SongsList.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport { AudioContext } from \"../context/AudioProvider\";\nimport Entypo from \"@expo/vector-icons/Entypo\";\nimport MaterialCommunityIcons from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport { RecyclerListView, LayoutProvider } from 'recyclerlistview';\nimport AudioListItem from \"../components/AudioListItem\";\nimport OptionModal from \"../components/OptionModal\";\nimport { Audio } from 'expo-av';\nimport { play, pause, resume } from \"../misc/audioController\";\n\nvar _Dimensions$get = Dimensions.get('window'),\n    width = _Dimensions$get.width,\n    height = _Dimensions$get.height;\n\nexport var SongsList = function (_Component) {\n  _inherits(SongsList, _Component);\n\n  var _super = _createSuper(SongsList);\n\n  function SongsList(props) {\n    var _this;\n\n    _classCallCheck(this, SongsList);\n\n    _this = _super.call(this, props);\n    _this.layoutProvider = new LayoutProvider(function (i) {\n      return 'audio';\n    }, function (type, dim) {\n      switch (type) {\n        case 'audio':\n          dim.width = Dimensions.get('window').width;\n          dim.height = 70;\n          break;\n\n        default:\n          dim.width = 0;\n          dim.height = 0;\n      }\n    });\n\n    _this.handleAudioPress = function _callee(audio) {\n      var _this$context, soundObj, playbackObj, currentAudio, updateState, _playbackObj, status, _status, _status2;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$context = _this.context, soundObj = _this$context.soundObj, playbackObj = _this$context.playbackObj, currentAudio = _this$context.currentAudio, updateState = _this$context.updateState;\n\n              if (!(soundObj === null)) {\n                _context.next = 7;\n                break;\n              }\n\n              _playbackObj = new Audio.Sound();\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(play(_playbackObj, audio.uri));\n\n            case 5:\n              status = _context.sent;\n              return _context.abrupt(\"return\", updateState(_this.context, {\n                currentAudio: audio,\n                playbackObj: _playbackObj,\n                soundObj: status\n              }));\n\n            case 7:\n              if (!(soundObj.isLoaded && soundObj.isPlaying)) {\n                _context.next = 12;\n                break;\n              }\n\n              _context.next = 10;\n              return _regeneratorRuntime.awrap(pause(playbackObj));\n\n            case 10:\n              _status = _context.sent;\n              return _context.abrupt(\"return\", updateState(_this.context, {\n                soundObj: _status\n              }));\n\n            case 12:\n              if (!(soundObj.isLoaded && !soundObj.isPlaying && currentAudio.id === audio.id)) {\n                _context.next = 17;\n                break;\n              }\n\n              _context.next = 15;\n              return _regeneratorRuntime.awrap(resume(playbackObj));\n\n            case 15:\n              _status2 = _context.sent;\n              return _context.abrupt(\"return\", updateState(_this.context, {\n                soundObj: _status2\n              }));\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.rowRenderer = function (type, item) {\n      return React.createElement(AudioListItem, {\n        title: item.filename,\n        duration: item.duration,\n        onAudioPress: function onAudioPress() {\n          return _this.handleAudioPress(item);\n        },\n        on: true,\n        onOptionPress: function onOptionPress() {\n          _this.currentItem = item;\n\n          _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n            optionModalVisible: true\n          }));\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 7\n        }\n      });\n    };\n\n    _this.state = {\n      optionModalVisible: false\n    };\n    _this.currentItem = {};\n    return _this;\n  }\n\n  _createClass(SongsList, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(SafeAreaView, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 7\n        }\n      }, React.createElement(StatusBar, {\n        barStyle: \"default\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }\n      }), React.createElement(AudioContext.Consumer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }\n      }, function (_ref) {\n        var dataProvider = _ref.dataProvider;\n        return React.createElement(View, {\n          style: {\n            flex: 1\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }\n        }, React.createElement(RecyclerListView, {\n          dataProvider: dataProvider,\n          layoutProvider: _this2.layoutProvider,\n          rowRenderer: _this2.rowRenderer,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }\n        }), React.createElement(OptionModal, {\n          onPlayPress: function onPlayPress() {\n            return console.log('Tocando');\n          },\n          currentItem: _this2.currentItem,\n          onClose: function onClose() {\n            return _this2.setState(_objectSpread(_objectSpread({}, _this2.state), {}, {\n              optionModalVisible: false\n            }));\n          },\n          visible: _this2.state.optionModalVisible,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 17\n          }\n        }));\n      }), React.createElement(View, {\n        style: styles.bottomContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.bottomControls,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.props.navigation.navigate('PlayingScreen');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }\n      }, React.createElement(MaterialCommunityIcons, {\n        color: \"#fff\",\n        name: \"headphones\",\n        size: 30,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 15\n        }\n      })), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.props.navigation.navigate('SongsList');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }\n      }, React.createElement(Entypo, {\n        color: \"#fff\",\n        name: \"list\",\n        size: 30,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 15\n        }\n      })), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.props.navigation.navigate('LoadingScreen');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }\n      }, React.createElement(MaterialCommunityIcons, {\n        color: \"#fff\",\n        name: \"cloud\",\n        size: 30,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 15\n        }\n      })))));\n    }\n  }]);\n\n  return SongsList;\n}(Component);\nSongsList.contextType = AudioContext;\n;\nexport default SongsList;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#222831'\n  },\n  bottomContainer: {\n    borderTopColor: '#393E46',\n    borderTopWidth: 1,\n    width: width,\n    alignItems: 'center',\n    paddingVertical: 15\n  },\n  bottomControls: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    width: '80%'\n  }\n});","map":{"version":3,"sources":["/home/mazetti/Bruno/eps/Computação Móvel/EP1/app/screens/SongsList.js"],"names":["React","Component","TouchableOpacity","AudioContext","Entypo","MaterialCommunityIcons","RecyclerListView","LayoutProvider","AudioListItem","OptionModal","Audio","play","pause","resume","Dimensions","get","width","height","SongsList","props","layoutProvider","i","type","dim","handleAudioPress","audio","context","soundObj","playbackObj","currentAudio","updateState","Sound","uri","status","isLoaded","isPlaying","id","rowRenderer","item","filename","duration","currentItem","setState","state","optionModalVisible","styles","container","dataProvider","flex","console","log","bottomContainer","bottomControls","navigation","navigate","contextType","StyleSheet","create","backgroundColor","borderTopColor","borderTopWidth","alignItems","paddingVertical","flexDirection","justifyContent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n  SafeAreaView,\n  View,\n  StyleSheet,\n  Dimensions,\n  StatusBar,\n} from 'react-native';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport { AudioContext } from '../context/AudioProvider';\nimport Entypo from 'react-native-vector-icons/Entypo';\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons';\nimport { RecyclerListView, LayoutProvider } from 'recyclerlistview';\nimport AudioListItem from '../components/AudioListItem';\nimport OptionModal from '../components/OptionModal';\nimport { Audio } from 'expo-av'\nimport { play, pause, resume } from '../misc/audioController'\n\nconst { width, height } = Dimensions.get('window');\n\nexport class SongsList extends Component {\n  static contextType = AudioContext\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      optionModalVisible: false\n    }\n\n    this.currentItem = {\n\n    }\n  }\n\n  layoutProvider = new LayoutProvider((i) => 'audio', (type, dim) => {\n    switch (type) {\n      case 'audio':\n        dim.width = Dimensions.get('window').width\n        dim.height = 70\n        break\n      default:\n        dim.width = 0\n        dim.height = 0\n    }\n  })\n\n  handleAudioPress = async (audio) => {\n    const { soundObj, playbackObj, currentAudio, updateState } = this.context\n    if (soundObj === null) {\n      const playbackObj = new Audio.Sound()\n      const status = await play(playbackObj, audio.uri)\n\n      return updateState(this.context,\n        {\n          currentAudio: audio,\n          playbackObj: playbackObj,\n          soundObj: status\n        }\n      )\n    }\n\n    if (soundObj.isLoaded && soundObj.isPlaying) {\n      const status = await pause(playbackObj)\n\n      return updateState(this.context, { soundObj: status })\n    }\n\n    if (soundObj.isLoaded && !soundObj.isPlaying && currentAudio.id === audio.id) {\n      const status = await resume(playbackObj)\n\n      return updateState(this.context, { soundObj: status })\n    }\n  }\n\n  rowRenderer = (type, item) => {\n    return (\n      <AudioListItem\n        title={item.filename}\n        duration={item.duration}\n        onAudioPress={() => this.handleAudioPress(item)}\n        on onOptionPress={() => {\n          this.currentItem = item\n          this.setState({ ...this.state, optionModalVisible: true })\n        }}>\n      </AudioListItem>\n    )\n  }\n\n  render() {\n    return (\n      <SafeAreaView style={styles.container}>\n        <StatusBar barStyle='default' />\n\n        <AudioContext.Consumer>\n          {({ dataProvider }) => {\n            return (\n              <View style={{ flex: 1 }}>\n                <RecyclerListView\n                  dataProvider={dataProvider}\n                  layoutProvider={this.layoutProvider}\n                  rowRenderer={this.rowRenderer}\n                />\n\n                <OptionModal\n                  onPlayPress={() => console.log('Tocando')}\n                  currentItem={this.currentItem}\n                  onClose={() => this.setState({ ...this.state, optionModalVisible: false })}\n                  visible={this.state.optionModalVisible}\n                />\n\n              </View>\n            )\n          }}\n        </AudioContext.Consumer>\n\n        <View style={styles.bottomContainer}>\n          <View style={styles.bottomControls}>\n            <TouchableOpacity onPress={() => this.props.navigation.navigate('PlayingScreen')}>\n              <MaterialCommunityIcons color='#fff' name=\"headphones\" size={30} />\n            </TouchableOpacity>\n\n            <TouchableOpacity onPress={() => this.props.navigation.navigate('SongsList')}>\n              <Entypo color='#fff' name=\"list\" size={30} />\n            </TouchableOpacity>\n\n            <TouchableOpacity onPress={() => this.props.navigation.navigate('LoadingScreen')}>\n              <MaterialCommunityIcons color='#fff' name=\"cloud\" size={30} />\n            </TouchableOpacity>\n          </View>\n        </View>\n      </SafeAreaView >\n    );\n  };\n};\n\nexport default SongsList;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#222831'\n  },\n\n  bottomContainer: {\n    borderTopColor: '#393E46',\n    borderTopWidth: 1,\n    width: width,\n    alignItems: 'center',\n    paddingVertical: 15\n  },\n\n  bottomControls: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    width: '80%'\n  }\n})"]},"metadata":{},"sourceType":"module"}